<html>
    <head>
        <title>Resource Tracker</title>
        <meta name="viewport" content="user-scalable=no" />
        <link rel="stylesheet" type="text/css" href="main.css">
        <script type="text/javascript">
            var counters = {"brick":0, "ore":0, "sheep":0, "wheat":0, "wood":0};

            function initialize() {
                for (var key in counters) {
                    counters[key] = sessionStorage.getItem(key);
                    if (!counters[key])
                        counters[key] = 0;
                    document.getElementById(key).value = counters[key];
                }
            }

            function increment(resource) {
                counters[resource]++;
                sessionStorage.setItem(resource, counters[resource]);
                document.getElementById(resource).value = counters[resource];
            }

            function decrement(resource) {
                if (counters[resource]>0){
                    counters[resource]--;
                    sessionStorage.setItem(resource, counters[resource]);
                }
                document.getElementById(resource).value = counters[resource];
            }

            function update(resource, newValue) {
                if (isInteger(newValue)) {
                    counters[resource] = newValue;
                    sessionStorage.setItem(resource, counters[resource]);
                } else {
                    // keep the current value
                    document.getElementById(resource).value = counters[resource];
                }
            }

            function isInteger(x) {
                return x % 1 === 0;
            }

            function addNewResource() {
                alert("Sorry, this has not yet been implemented.");
            }
        </script>
    </head>
    <body onload="initialize()">
        <div id="main-content">
            <p class="title">Resources</p>

            <table>
                <tr>
                    <td class="button-label">
                        <p class="label-text">Brick: </p>
                    </td>
                    <td class="button-section">
                        <span>
                            <button type="button" class="minus" onclick="decrement('brick')"><p class="button-text">-</p></button>
                            <input type="text" class="input" id="brick" onchange="update(this.id, this.value)">
                            <button type="button" class="plus" onclick="increment('brick')"><p class="button-text">+</p></button>
                        </span>
                    </td>  
                </tr>
                <tr>
                    <td class="button-label">
                        <p class="label-text">Ore: </p>
                    </td>
                    <td class="button-section">
                        <span>
                            <button type="button" class="minus" onclick="decrement('ore')"><p class="button-text">-</p></button>
                            <input type="text" class="input" id="ore" onchange="update(this.id, this.value)">
                            <button type="button" class="plus" onclick="increment('ore')"><p class="button-text">+</p></button>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="button-label">
                        <p class="label-text">Sheep: </p>
                    </td>
                    <td class="button-section">
                        <span>
                            <button type="button" class="minus" onclick="decrement('sheep')"><p class="button-text">-</p></button>
                            <input type="text" class="input" id="sheep" onchange="update(this.id, this.value)">
                            <button type="button" class="plus" onclick="increment('sheep')"><p class="button-text">+</p></button>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="button-label">
                        <p class="label-text">Wheat: </p>
                    </td>
                    <td class="button-section">
                        <span>
                            <button type="button" class="minus" onclick="decrement('wheat')"><p class="button-text">-</p></button>
                            <input type="text" class="input" id="wheat" onchange="update(this.id, this.value)">
                            <button type="button" class="plus" onclick="increment('wheat')"><p class="button-text">+</p></button>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="button-label">
                        <p class="label-text">Wood: </p>
                    </td>
                    <td class="button-section">
                        <span>
                            <button type="button" class="minus" onclick="decrement('wood')"><p class="button-text">-</p></button>
                            <input type="text" class="input" id="wood" onchange="update(this.id, this.value)">
                            <button type="button" class="plus" onclick="increment('wood')"><p class="button-text">+</p></button>
                        </span>
                    </td>
                </tr>
            </table>

            <div class="center-button-section">
                <button onclick="addNewResource()">
                    <p class="label-text">
                        Add New Resource
                    </p>
                </button>
            </div>
        </div>

        <div id="navbar">
            <a href="diceroller.html"><img src="../img/dice-six-faces-six.png" id="menu-dice" class="menu-item-image"></img></a>
            <a href="resources.html"><img src="../img/wheat.png" id="menu-resource" class="menu-item-image"></img></a>
            <a href="notes.html"><img src="../img/bookmarklet.png" id="menu-notes" class="menu-item-image"></img></a>
            <a href="settings.html"><img src="../img/cog.png" id="menu-settings" class="menu-item-image"></img></a>
        </div>
    </body>
</html>